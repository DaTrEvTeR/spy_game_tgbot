from pathlib import Path

from pydantic import ConfigDict
from pydantic_settings import BaseSettings

env_file = Path(__file__).parent.parent / ".env"


class Settings(BaseSettings):
    """Provides all project settings and takes some settings,
    such as "BOT_API_TOKEN", from .env.
    """

    bot_api_token: str

    minimal_player_count: int = 2
    start_game_command: str = "start_game"
    registration_time: int = 60  # Time for registration for game after command `start_game_command` in sec
    start_registration_msg: str = "–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–∞ –∏–≥—Ä—É!"
    vote_time: int = 60  # Time for vote for spy in sec

    model_config = ConfigDict(
        extra="ignore",
        env_file=env_file if env_file.exists() else None,
        env_file_encoding="utf-8",
    )

    @property
    def game_rules(self) -> str:
        """Get formatted game rules."""
        return (
            "üìö –ü—Ä–∞–≤–∏–ª–∞ –∏–≥—Ä—ã:\n"
            "<blockquote><B>–í —ç—Ç–æ–π –∏–≥—Ä–µ –≤—ã –º–æ–∂–µ—Ç–µ –æ–∫–∞–∑–∞—Ç—å—Å—è –≥–¥–µ —É–≥–æ–¥–Ω–æ:</B>\n"
            "‚Ä¢ –≤ —à–∫–æ–ª–µ üè´\n"
            "‚Ä¢ –≤ –ø–æ–ª–∏—Ü–µ–π—Å–∫–æ–º —É—á–∞—Å—Ç–∫–µ üöî\n"
            "‚Ä¢ –≤ –ø—É—Å—Ç—ã–Ω–µ –°–∞—Ö–∞—Ä–∞ üèú\n"
            "‚Ä¢ –∏ –¥–∞–∂–µ –Ω–∞ –∫–æ—Å–º–∏—á–µ—Å–∫–æ–π —Å—Ç–∞–Ω—Ü–∏–∏ üöÄ\n\n"
            "–ì–¥–µ –±—ã –≤—ã –Ω–∏ –æ–∫–∞–∑–∞–ª–∏—Å—å, —Ä–∞—Å—Å–ª–∞–±–ª—è—Ç—å—Å—è –Ω–µ–ª—å–∑—è: <B>—Ä—è–¥–æ–º –æ—Ä—É–¥—É–µ—Ç —à–ø–∏–æ–Ω</B> ü§´.\n"
            "–¢–µ–º –Ω–µ –º–µ–Ω–µ–µ –µ–º—É –Ω–µ –∏–∑–≤–µ—Å—Ç–Ω–æ, –≥–¥–µ –≤—ã, —Ç–∞–∫ —á—Ç–æ –∏–≥—Ä–æ–∫–∞–º –Ω—É–∂–Ω–æ –∑–∞–¥–∞–≤–∞—Ç—å –¥—Ä—É–≥ –¥—Ä—É–≥—É –Ω–∞–≤–æ–¥—è—â–∏–µ –≤–æ–ø—Ä–æ—Å—ã –∏ "
            "–ø—Ä–∏–∫–ª–∞–¥—ã–≤–∞—Ç—å –º–∞–∫—Å–∏–º—É–º —É—Å–∏–ª–∏–π –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã –Ω–µ –≤—ã–¥–∞–≤–∞—è –≤–∞—à–µ–π –ª–æ–∫–∞—Ü–∏–∏ <B>–≤—ã—á–∏—Å–ª–∏—Ç—å —à–ø–∏–æ–Ω–∞</B> –ø–æ "
            "–Ω–µ—Ç–æ—á–Ω–æ—Å—Ç—è–º –≤ –æ—Ç–≤–µ—Ç–∞—Ö üïµÔ∏è.\n"
            "–£ —à–ø–∏–æ–Ω–æ–≤ –¥—Ä—É–≥–∞—è –∑–∞–¥–∞—á–∞ ‚Äî <B>–≤—ã—è—Å–Ω–∏—Ç—å –ª–æ–∫–∞—Ü–∏—é</B>, –∑–∞–¥–∞–≤–∞—è –≤–æ–ø—Ä–æ—Å—ã –æ –Ω–µ–π —Ç–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, —á—Ç–æ–±—ã –æ—Å—Ç–∞–ª—å–Ω—ã–µ "
            "–Ω–µ –≤—ã—á–∏—Å–ª–∏–ª–∏ –µ–≥–æ. –ù–æ –µ–º—É —Å—Ç–æ–∏—Ç –±—ã—Ç—å –æ—Å—Ç–æ—Ä–æ–∂–Ω—ã–º: –ª–∏—à—å —Ä–∞—Å–∫—Ä—ã–≤ —Å–µ–±—è, –æ–Ω –º–æ–∂–µ—Ç –ø–µ—Ä–µ–π—Ç–∏ –∫ –≤—ã–±–æ—Ä—É, —Ç–∞–∫ —á—Ç–æ "
            "–ø—Ä–∞–≤–∞ –Ω–∞ –æ—à–∏–±–∫—É —É –Ω–µ–≥–æ –Ω–µ—Ç ‚ùå.\n\n"
            f"<I>–ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–≥—Ä–æ–∫–æ–≤: {self.minimal_player_count}.\n"
            f"–ù–∞ 1 —à–ø–∏–æ–Ω–∞ –æ—Ç {self.minimal_player_count-1} –¥–æ {self.minimal_player_count*2-2} —Ä–∞–±–æ—Ç–Ω–∏–∫–æ–≤ "
            "(–Ω–∞ {self.minimal_player_count*2-1} —Ä–∞–±–æ—Ç–Ω–∏–∫–æ–≤ 1 —à–ø–∏–æ–Ω, –Ω–∞ {self.minimal_player_count*2} —É–∂–µ 2)</I>.\n\n"
            "‚ùóÔ∏è<B>–®–ø–∏–æ–Ω –ø–æ–±–µ–∂–¥–∞–µ—Ç</B>, —É–≥–∞–¥–∞–≤ –ª–æ–∫–∞—Ü–∏—é —Ä–∞–±–æ—Ç–Ω–∏–∫–æ–≤ (–æ—Å—Ç–∞–≤—à–∏–µ—Å—è —à–ø–∏–æ–Ω—ã —Å—á–∏—Ç–∞—é—Ç—Å—è –ø—Ä–æ–∏–≥—Ä–∞–≤—à–∏–º–∏).\n"
            "–ï—Å–ª–∏ —à–ø–∏–æ–Ω –Ω–µ —É–≥–∞–¥–∞–ª –ª–æ–∫–∞—Ü–∏—é ‚Äî –æ–Ω –ø–æ–∫–∏–¥–∞–µ—Ç –∏–≥—Ä—É, –≤–µ–¥—å —Ç–µ–ø–µ—Ä—å –µ–≥–æ —Ä–æ–ª—å —Ä–∞—Å–∫—Ä—ã—Ç–∞.\n\n"
            "‚ùóÔ∏è–ï—Å–ª–∏ –≤ –∏–≥—Ä–µ –æ—Å—Ç–∞–µ—Ç—Å—è —Ä–∞–≤–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —à–ø–∏–æ–Ω–æ–≤ –∏ —Ä–∞–±–æ—Ç–Ω–∏–∫–æ–≤ - <B>–æ–±—ä—è–≤–ª—è–µ—Ç—Å—è –Ω–∏—á—å—è</B>.\n\n"
            "‚ùóÔ∏è<B>–†–∞–±–æ—Ç–Ω–∏–∫–∏ –æ–¥–µ—Ä–∂–∞—Ç –ø–æ–±–µ–¥—É</B>, –µ—Å–ª–∏ –≤—ã–≥–æ–Ω—è—Ç –≤—Å–µ—Ö —à–ø–∏–æ–Ω–æ–≤.</blockquote>"
        )

    @property
    def how_use_bot(self) -> str:
        """Get formatted help on how to use the bot."""
        time_min = ""
        time_sec = ""
        if self.registration_time // 60 >= 1:
            time_min = f"{self.registration_time // 60} –º–∏–Ω"
        if self.registration_time % 60 != 0:
            time_sec = f"{self.registration_time % 60} —Å–µ–∫"
        time = f"{time_min} {time_sec}".strip()
        return (
            "–î–ª—è –Ω–∞—á–∞–ª–∞ –¥–æ–±–∞–≤—å—Ç–µ –±–æ—Ç–∞ –≤ —á–∞—Ç, –≤ –∫–æ—Ç–æ—Ä–æ–º –≤—ã —Ö–æ—Ç–∏—Ç–µ –ø–æ–∏–≥—Ä–∞—Ç—å –≤ —à–ø–∏–æ–Ω–∞. –ü—Ä–æ–ø–∏—à–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É /start_game. "
            "–ë–æ—Ç –ø—Ä–∏—Å—ã–ª–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –≤ –∏–≥—Ä—É üéÆ.\n\n"
            f"–ï—Å–ª–∏ –∑–∞ {time} –Ω–µ –Ω–∞–±–µ—Ä–µ—Ç—Å—è –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–≥—Ä–æ–∫–æ–≤ ({self.minimal_player_count}) "
            "‚Äî –∏–≥—Ä–∞ –æ—Ç–º–µ–Ω—è–µ—Ç—Å—è ‚ùå.\n"
            "–ï—Å–ª–∏ –∂–µ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–≥—Ä–æ–∫–æ–≤ –Ω–∞–±—Ä–∞–ª–æ—Å—å - –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è –∏–≥—Ä–æ–≤–æ–π –ø—Ä–æ—Ü–µ—Å—Å ‚úÖ.\n\n"
            "–ü—Ä–æ—Å—Ç–æ —Å–ª–µ–¥—É–π—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏—è–º –±–æ—Ç–∞ –∏ –Ω–∞—Å–ª–∞–∂–¥–∞–π—Ç–µ—Å—å –∏–≥—Ä–æ–π üòâ!"
        )

    @property
    def commands(self) -> str:
        """Get formatted help on how to use bot`s commands."""
        return (
            "üíª –ö–æ–º–∞–Ω–¥—ã:\n\n"
            f"<blockquote>üí¨ /{self.start_game_command} ‚Äî –∑–∞–ø—É—Å—Ç–∏—Ç—å –Ω–∞–±–æ—Ä –≤ –∏–≥—Ä—É.\n\n"
            "üí¨ /vote ‚Äî —Ä–∞–±–æ—Ç–Ω–∏–∫ –º–æ–∂–µ—Ç –ø—Ä–æ–ø–∏—Å–∞—Ç—å —ç—Ç—É –∫–æ–º–∞–Ω–¥—É, –µ—Å–ª–∏ –≥–æ—Ç–æ–≤ —Å–∫–∞–∑–∞—Ç—å –∫—Ç–æ —è–≤–ª—è–µ—Ç—Å—è —à–ø–∏–æ–Ω–æ–º. "
            "–ö–æ–≥–¥–∞ –±–æ–ª—å—à–µ –ø–æ–ª–æ–≤–∏–Ω—ã –∏–≥—Ä–æ–∫–æ–≤ –Ω–∞–ø–∏—à—É—Ç —ç—Ç—É –∫–æ–º–∞–Ω–¥—É ‚Äî –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ –Ω–∞—á–Ω–µ—Ç—Å—è!\n\n"
            "üí¨ /reveal ‚Äî —à–ø–∏–æ–Ω –º–æ–∂–µ—Ç –ø—Ä–æ–ø–∏—Å–∞—Ç—å —ç—Ç—É –∫–æ–º–∞–Ω–¥—É, –µ—Å–ª–∏ –æ–Ω —Ö–æ—á–µ—Ç —Ä–∞—Å–∫—Ä—ã—Ç—å —Ä–æ–ª—å –∏ —É–≥–∞–¥–∞—Ç—å –ª–æ–∫–∞—Ü–∏—é.\n\n"
            "‚ùóÔ∏è–ö–æ–º–∞–Ω–¥—ã /vote –∏ /reveal –º–æ–≥—É—Ç –ø—Ä–æ–ø–∏—Å–∞—Ç—å –∫–∞–∫ —à–ø–∏–æ–Ω, —Ç–∞–∫ –∏ —Ä–∞–±–æ—Ç–Ω–∏–∫, –Ω–æ –µ—Å–ª–∏ –∫–æ–º–∞–Ω–¥—É /reveal "
            "–ø—Ä–æ–ø–∏—à–µ—Ç —Å–æ—Ç—Ä—É–¥–Ω–∏–∫ - –æ–Ω –ø—Ä–æ—Å—Ç–æ —Ä–∞—Å–∫—Ä–æ–µ—Ç —Å–≤–æ—é —Ä–æ–ª—å –∏ –≤—ã–π–¥–µ—Ç –∏–∑ –∏–≥—Ä—ã</blockquote>"
        )


settings = Settings()
